<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Kinect-RGBD-GraphSLAM6D: Documentation Overview</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Kinect-RGBD-GraphSLAM6D</div>
   <div id="projectbrief">Simultaneous Localization and Mapping with 6 degrees of freedom using the Kinect sensor</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<h1>Documentation Overview </h1>  </div>
</div>
<div class="contents">
<div class="textblock"><h2><a class="anchor" id="intro_sec"></a>
Introduction</h2>
<p>This is the documentation of the Kinect-RGBD-GraphSLAM6D Final Year Project. This project integrates state-of-the-art algorithms to generate 3D maps using a hand-held Kinect sensor. The provided solution is intended to take advantage of the two main sensors that the Microsoft Kinect device contains, which are the RGB camera and the range sensor. A first approximation to the trajectory of the sensor is estimated using a pairwise alignment approach using consecutive point clouds. To avoid cummulative error this project uses a GraphSLAM approach, that mitigates the drift in the trajectory and therefore, inconsistencies in the map. </p>
<div align="center">
<img src="KinectSLAMPipelineEnglish.svg" alt="KinectSLAMPipelineEnglish.svg"/>
</div>
<h2><a class="anchor" id="dependencies_sec"></a>
Dependencies</h2>
<p>This project integrates several open-source libraries to build the whole solution. The main dependencies are:</p>
<ul>
<li>OpenCV: <a href="http://opencv.willowgarage.com/wiki/">http://opencv.willowgarage.com/wiki/</a></li>
<li>PCL: <a href="http://pointclouds.org/">http://pointclouds.org/</a></li>
<li>MRPT: <a href="http://www.mrpt.org/">http://www.mrpt.org/</a></li>
<li>GICP: <a href="http://www.stanford.edu/~avsegal/generalized_icp.html">http://www.stanford.edu/~avsegal/generalized_icp.html</a></li>
<li>G2O: <a href="http://openslam.org/g2o">http://openslam.org/g2o</a></li>
<li>Eigen: <a href="http://eigen.tuxfamily.org">http://eigen.tuxfamily.org</a></li>
<li>Auxiliary libraries<ol type="a">
<li>FLANN</li>
<li>ANN</li>
<li>GSL</li>
<li>SuiteSparse</li>
<li>OpenNI</li>
<li>libfreenect</li>
<li>Boost</li>
<li>VTK</li>
<li>CUDA</li>
</ol>
</li>
</ul>
<h2><a class="anchor" id="install_sec"></a>
Installation</h2>
<p>This project has been implemented and tested in Ubuntu 11.04. To compile the source code you need to install the dependencies first. After that, follow the following steps to compile the project.</p>
<ul>
<li>Compile the GICP library.<ol type="a">
<li>Download the GICP library inside the KinectSLAM6D root directory. The source code of the GICP library can be found in the following link. <br/>
 <a href="http://www.stanford.edu/~avsegal/generalized_icp.html">http://www.stanford.edu/~avsegal/generalized_icp.html</a></li>
<li>Compile ANN library using the following commands: <br/>
 <div class="fragment"><pre class="fragment">
cd KinectSLAM6D/gicp/ann_1.1.1
make linux-g++
</pre></div></li>
<li>Compile the GICP library using the following commands: <br/>
 <div class="fragment"><pre class="fragment">
cd KinectSLAM6D/gicp
make
</pre></div></li>
</ol>
</li>
</ul>
<ul>
<li>Get the G2O library (tested with revision 23).<ol type="a">
<li>Download the g2o library inside the KinectSLAM6D root directory using the following commands. <div class="fragment"><pre class="fragment">
cd KinectSLAM6D
svn co https://svn.openslam.org/data/svn/g2o
</pre></div></li>
</ol>
</li>
</ul>
<ul>
<li>Generate the Code::Blocks project.<ol type="a">
<li>Open CMake.</li>
<li>Set the source directory to KinectSLAM6D and the build directory to KinectSLAM6D/build.</li>
<li>Set OpenCV_DIR and MRPT_DIR to the OpenCV and MRPT build directories respectively.</li>
<li>Configure.</li>
<li>Generate.</li>
</ol>
</li>
</ul>
<ul>
<li>Compile the KinectSLAM6D project.<ol type="a">
<li>Open the KinectSLAM6D/build/KinectSLAM6D.cbp project.</li>
<li>Compile.</li>
</ol>
</li>
</ul>
<ul>
<li>Install CVPR tools (optional).<ol type="a">
<li>Install the CVPR tools dependencies.</li>
<li>Download the CVPR tools in the KinectSLAM6D/tools directory. The set of tools can be found in the following link. <br/>
 <a href="https://cvpr.in.tum.de/data/datasets/rgbd-dataset/tools">https://cvpr.in.tum.de/data/datasets/rgbd-dataset/tools</a> <div class="fragment"><pre class="fragment">
cd KinectSLAM6D/tools
svn co https://svncvpr.in.tum.de/cvpr-ros-pkg/trunk/rgbd_benchmark/rgbd_benchmark_tools/src/rgbd_benchmark_tools
</pre></div></li>
</ol>
</li>
</ul>
<h2><a class="anchor" id="usage_sec"></a>
Software usage</h2>
<p>After compiling the project, two executables should appear in the KinectSLAM6D/build directory. The program PairwiseAlignmentSteps shows visually the steps performed in the stage of Pairwise Alignment. The program Kinect6DSLAM generates 3D maps from the provided RGB-D data. The RGB-D data can be provided using three different interfaces: two of them grabs RGB-D frames directly from the Kinect sensor (online). These two interfaces use the MRPT or PCL libraries to access the Kinect data. The last interface grabs RGB-D frames from .rawlog datasets using the MRPT library. In the following link there are some RGB-D datasets (.rawlog) that can be used to test the programs. To change between different configurations, set the proper #define's in the kinect6DSLAM.cpp and PairwiseAlignmentSteps.cpp files.</p>
<p><a href="http://www.mrpt.org/robotic_datasets">http://www.mrpt.org/robotic_datasets</a></p>
<p>The original datasets can be found in the following link. However they are not prepared to be used in this sofware.</p>
<p><a href="http://cvpr.in.tum.de/data/datasets/rgbd-dataset">http://cvpr.in.tum.de/data/datasets/rgbd-dataset</a></p>
<p>These RGB-D datasets also contain a very precise ground-truth that can be very useful to evaluate different configurations. In the previous link, the CVPR group also provides a set of tools to measure the error between the estimated trajectory and the real trajectory of the ground-truth.</p>
<h3><a class="anchor" id="PairwiseAlignmentSteps"></a>
PairwiseAlignmentSteps</h3>
<p>This program performs Pairwise Alignment between two RGB-D frames selected by the user. This program aims to show visually the different steps that occur during the Pairwise Alignment process. This program requires the user to select two RGB-D frames of the sequence data. Press "enter" in the OpenCV window to select an RGB-D frame. The program stores the results of the alignment in the KinectSLAM6D/results directory.</p>
<div class="fragment"><pre class="fragment">
cd KinectSLAM6D/build
./PairwiseAlignmentSteps [* &lt;rgbd_dataset&gt;.rawlog]
</pre></div><p> [*] Optional parameter to provide a RGB-D dataset.</p>
<div align="center">
<img src="PairwiseAlignmentStepsOpenCV.png" alt="PairwiseAlignmentStepsOpenCV.png"/>
<p><strong>OpenCV window that shows the 2D features over the image data. Press enter over this window to grab a frame.</strong></p></div>
 <div align="center">
<img src="PairwiseAlignmentStepsPCL.png" alt="PairwiseAlignmentStepsPCL.png"/>
<p><strong>PCL window that shows the 3D features that correspond to the 2D features.</strong></p></div>
 <div align="center">
<img src="PairwiseAlignmentStepsResult.png" alt="PairwiseAlignmentStepsResult.png"/>
<p><strong>PCL window that shows the Pairwise Alignment result. Red: first point cloud. Blue: second point cloud. The result is stored in a .pcd file; to open the .pcd file use the pcd_viewer tool of the PCL library.</strong></p></div>
 <h3><a class="anchor" id="Kinect6DSLAM"></a>
Kinect6DSLAM</h3>
<p>This program generates a 3D map from the provided secuence of RGB-D frames. This program requires the user to press enter to stop grabbing RGB-D frames. The program stores the results of the alignment in the KinectSLAM6D/results directory. The program generates .pcd files that contain a global point cloud representing the 3D map. These files are generated in the KinectSLAM6D/results/pcd_files directory. The estimated trajectory files and GraphSLAM graphs are generated in the KinectSLAM6D/results/graphs directory.</p>
<div class="fragment"><pre class="fragment">
cd KinectSLAM6D/build
./KinectSLAM6D [* &lt;rgbd_dataset&gt;.rawlog] [** &lt;grount_truth&gt;.txt]
</pre></div><p> [*] Optional parameter to provide a RGB-D dataset. <br/>
 [**] Optional parameter to provide the ground-truth of the RGB-D dataset. (requires the CVPR tools and depencencies installed)</p>
<div align="center">
<img src="KinectSLAM6DOpenCV.png" alt="KinectSLAM6DOpenCV.png"/>
<p><strong>OpenCV window that shows the 2D correspondences between the current and previous frame. Press enter over this window to stop grabbing frames.</strong></p></div>
 <div align="center">
<img src="KinectSLAM6DResult.png" alt="KinectSLAM6DResult.png"/>
<p><strong>PCL window that shows the generated global map. The result is stored in a .pcd file; to open the .pcd file use the pcd_viewer tool of the PCL library.</strong></p></div>
 <div align="center">
<img src="KinectSLAM6DTrajectory.svg" alt="KinectSLAM6DTrajectory.svg"/>
<p><strong>Estimated trajectory compared to the ground-truth trajectory. This requires both the RGB-D dataset and ground-truth files, as well as the CVPR tools.</strong></p></div>
 <dl class="author"><dt><b>Author:</b></dt><dd>Miguel Algaba Borrego <br/>
 <a href="http://thecomputervision.blogspot.com/">http://thecomputervision.blogspot.com/</a> </dd></dl>
</div></div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Sun Feb 12 2012 11:52:03 for Kinect-RGBD-GraphSLAM6D by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </small></address>
</body>
</html>
